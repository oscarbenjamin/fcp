<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>EMAT10006 - Further Computer Programming - </title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="style.css" type="text/css" />
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>
  <body>
    <div id="header">
        EMAT10006 - Further Computer Programming
    </div>
    <div id="TOC">
      <ul><li><a href="index.html">Site Index</a></li></ul>
<ul>
<li><a href="#basic-c">Basic C</a><ul>
<li><a href="#another-look-at-hello-world">Another look at hello world</a></li>
<li><a href="#variables-in-c">Variables in C</a></li>
<li><a href="#changing-variables">Changing variables</a></li>
<li><a href="#the-printf-function">The <code>printf</code> function</a></li>
<li><a href="#exercises">Exercises</a></li>
<li><a href="#comments-and-coding-style">Comments and coding style</a></li>
</ul></li>
</ul>
    </div>
    <div id="main">
<h1 id="basic-c">Basic C</h1>
<h2 id="another-look-at-hello-world">Another look at hello world</h2>
<p>In the last section we saw how to save our C code in a file and how to compile and run that code using the terminal. We're now in a position to start thinking about the C code itself. First things first let's have another look at the hello world C program that we wrote in the previous section:</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    puts(<span class="st">&quot;Hello world!&quot;</span>);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>Now let's go through this from the top. The first line is <code>#include &lt;stdio.h&gt;</code> and is an example of a <code>#include</code> statement. This is similar to an <code>import</code> statement in Python and is used to reference functions and variables from other code files. In this case we want to be able to use the <code>puts</code> function which is declared in <code>stdio.h</code> so we need to <code>#include</code> this for that reason. Files ending with <code>.h</code> also contain C code and are called <em>header files</em>. We will look more at these later. For now just know that we will probably always need to have the line <code>#include &lt;stdio.h&gt;</code> at the top of our C programs.</p>
<p>The rest of the code is for the <code>main</code> function. This is made up of a <em>signature line</em> <code>int main(int argc, char *argv[])</code> and a <em>function body</em> which is enclosed in a pair of curly brackets <code>{</code> and <code>}</code>. We will look more at how to write functions later but for now just know that this defines the <code>main</code> function. Every C program needs to have a <code>main</code> function. When we run the program from the terminal it is the <code>main</code> function that is called and it is the code in the body of the main function that is executed.</p>
<p>In the body of the <code>main</code> function there are two statements on two different lines. The end of a statement is marked with a <code>;</code> in C. The first statement is <code>puts(&quot;Hello world!&quot;);</code>. This equivalent to the Python statement <code>print(&quot;Hello world!&quot;)</code>. The <code>puts</code> function is the function for printing a string in C. Like in Python we can make a string using double quotes <code>&quot;</code>. Unlike in Python we cannot use single quotes <code>'</code> here and the statement needs to be terminated with a semicolon.</p>
<p>Finally the last statement in the body of the <code>main</code> function is <code>return 0</code>. This sets the <em>exit code</em> of the program (more on this later). For now just know that we always need to return an integer value from the <code>main</code> function and this statement is the syntax for doing that.</p>
<h2 id="variables-in-c">Variables in C</h2>
<p>So the basic idea that we get above is that our C program has to have a bunch of stuff just to get it to work and that the code that we want to run needs to go inside the <code>main</code> function. So how can we start to put some interesting things in there? Suppose we have a Python script that looks like:</p>
<pre class="sourceCode python"><code class="sourceCode python">a = <span class="dv">20</span>
b = <span class="dv">30</span>
c = a * b
<span class="dt">print</span>(<span class="st">&quot;c = </span><span class="ot">%d</span><span class="st">&quot;</span> % c)</code></pre>
<p>Assuming I saved the above as <code>variables.py</code> I can open a terminal, <code>cd</code> into the appropriate directory, and run it like so:</p>
<pre><code>$ python variables.py
c = 600</code></pre>
<p>Here we have three variables <code>a</code>, <code>b</code>, and <code>c</code>. The first statement assigns the value <code>20</code> to the name <code>a</code>. The second statement assigns the value <code>30</code> to the name <code>b</code>. The third statement computes the result <code>a * b</code> and assigns that value to the name <code>c</code>. Finally we print a message that shows the value of <code>c</code>. Hopefully that's all straight-forward. So how do we do the same in C?</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="dt">int</span> a;
    <span class="dt">int</span> b;
    <span class="dt">int</span> c;
    a = <span class="dv">20</span>;
    b = <span class="dv">30</span>;
    c = a * b;
    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>I'll save the above code as <code>variables.c</code>. To compile and run it open a terminal, <code>cd</code> into the appropriate directory and do</p>
<pre><code>$ gcc variables.c -o variables.exe
$ ./variables.exe
c = 600</code></pre>
<p>Hopefully this is broadly self-explanatory. Remembering the hello world program we can see that we have the same basic stuff in this program. We first <code>#include &lt;stdio.h&gt;</code> and then we have the <code>main</code> function with its signature line and the opening and closing curly braces and <code>return 0</code>. The code that actually executes in a C program is the code in the body of the <code>main</code> function before the <code>return 0;</code> statement.</p>
<p>Firstly, in order to have three variables <code>a</code>, <code>b</code>, and <code>c</code> in a C program we need to declare the variables. The line that says <code>int a;</code> is the <em>declaration</em> for variable <code>a</code>. It declares that there will be a variable named <code>a</code> that will be of a particular <em>type</em>, specifically <code>int</code>. The name <code>int</code> is short for <em>integer</em> and we'll explain more about what <code>int</code> really means in C later. Having declared the variable <code>a</code> we can later give it a value with the statement <code>a = 20;</code>. The first statement that gives a value to a variable is said to <em>initialise</em> the variable. The last statement in this program uses the <code>printf</code> function which prints out the value of the variable <code>c</code> (we'll come back to <code>printf</code> later).</p>
<p>In Python we don't declare variables and just skip straight to initialising them. In Python objects also have types but we don't need to declare the type of object that a variable can have. We can see the type of an object in Python using the <code>type</code> function:</p>
<pre><code>$ python
&gt;&gt;&gt; a = 1
&gt;&gt;&gt; type(a)
&lt;type &#39;int&#39;&gt;
&gt;&gt;&gt; b = &#39;hello&#39;
&gt;&gt;&gt; type(b)
&lt;type &#39;str&#39;&gt;</code></pre>
<p>So in Python we can just write <code>a = 1</code> and set the variable <code>a</code> to be an object of type <code>int</code> having the value <code>1</code>. In C we first have to tell the compiler what the type of a variable <code>a</code> should be before we can set it to any value. Now the C program above declares all of its variables at one place at the top of the <code>main</code> function but that's not the only way to do it. We can make it a bit shorter. For example we can declare all three variables on one line like this:</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="dt">int</span> a, b, c;
    a = <span class="dv">20</span>;
    b = <span class="dv">30</span>;
    c = a * b;
    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>In our C program the line <code>int a, b, c;</code> is equivalent to the three separate statements <code>int a;</code> etc. This is a handy way of declaring lots of variables without using too much screen space. We can also declare each variable at the same time as initialising it e.g.:</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="dt">int</span> a = <span class="dv">20</span>;
    <span class="dt">int</span> b = <span class="dv">30</span>;
    <span class="dt">int</span> c = a * b;
    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>However what we must not do is try to use a variable before it is declared or initialised. The compiler reads the code in order from start to finish. If we refer to a variable before it is declared then the compiler will refuse to compile it. So changing the above to</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="dt">int</span> c = a * b; <span class="co">/* before declaration */</span>
    <span class="dt">int</span> a = <span class="dv">20</span>;
    <span class="dt">int</span> b = <span class="dv">30</span>;
    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>we now get</p>
<pre><code>$ gcc variables.c -o variables.exe
variables.c: In function ‘main’:
variables.c:5:13: error: ‘a’ undeclared (first use in this function)
variables.c:5:13: note: each undeclared identifier is reported only once for each function it appears in
variables.c:5:17: error: ‘b’ undeclared (first use in this function)</code></pre>
<p>There are two types of messages that the compiler can give us: <em>errors</em> and <em>warnings</em>. Both type of message indicates a problem with our code. The difference is that if there are <em>any</em> errors then the code will not be compiled. In other words the file <code>variables.exe</code> will not have been created (or if it already exists then it won't have been modified).</p>
<p>If instead we declare <code>a</code> and <code>b</code> before using them but don't initialise them until after we get a warning.</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="dt">int</span> a, b;
    <span class="dt">int</span> c = a * b; <span class="co">/* before initialisation */</span>
    a = <span class="dv">20</span>;
    b = <span class="dv">30</span>;
    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>Now we get</p>
<pre><code>$ gcc variables.c -o variables.exe
$ ./variables.exe
c = 0</code></pre>
<p>But that's totally wrong. How did <code>c</code> get the value <code>0</code>. What's happened is that the compiler has implicitly set the values of <code>a</code> and <code>b</code> to <code>0</code> when they were declared. This is not guaranteed to happen though so this program could potentially print any value.</p>
<p>Annoyingly the compiler didn't give us any warnings or errors about this. If we want to see the warnings then we need to ask the compiler to turn them on by giving it the <code>-Wall</code> argument like so</p>
<pre><code>$ gcc -Wall variables.c -o variables.exe
variables.c: In function ‘main’:
variables.c:6:9: warning: ‘a’ is used uninitialised in this function [-Wuninitialized]
variables.c:6:9: warning: ‘b’ is used uninitialised in this function [-Wuninitialized]</code></pre>
<p>Always compile all of your code with the warnings turned on and always fix all warning messages. The warnings means that something is wrong in your code. Don't ignore them!</p>
<h2 id="changing-variables">Changing variables</h2>
<p>Just like in Python we can change the value of a variable by writing e.g. <code>x = x + 2</code> or in shorthand <code>x += 2</code>. Unlike in Python we also have the increment and decrement operators <code>x++</code>, <code>++x</code>, <code>x--</code>, and <code>--x</code>. The <code>++</code> operators are a short form for <code>x += 1</code> and the <code>--</code> operators are for <code>x -= 1</code>. So we have</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
  <span class="dt">int</span> a = <span class="dv">2</span>;
  printf(<span class="st">&quot;a = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, a);
  a = a + <span class="dv">4</span>;
  printf(<span class="st">&quot;a = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, a);
  a += <span class="dv">4</span>;
  printf(<span class="st">&quot;a = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, a);
  a++;
  printf(<span class="st">&quot;a = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, a);
  --a;
  printf(<span class="st">&quot;a = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, a);
  <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<p>This gives</p>
<pre><code>$ gcc -Wall change.c -o change.exe
$ ./change.exe
a = 2
a = 6
a = 10
a = 11
a = 10</code></pre>
<p>So we can see that the value of the variable changes with each of these statements. As you can expect the output of this program shows that each statement is executed in order one after another just like in Python (there are some programming languages that don't behave this way).</p>
<h2 id="the-printf-function">The <code>printf</code> function</h2>
<p>In the last section we have used the <code>printf</code> function to print output rather than the <code>puts</code> function that we used before. These functions are similar but not the same. <code>puts</code> is short for &quot;PUT String&quot; and just prints a string to the terminal. <code>printf</code> is short for &quot;PRINT Formatted&quot; (or something like that) and is used to print the formatted value of a variable. The specific line that we used above is</p>
<pre class="sourceCode C"><code class="sourceCode c">    printf(<span class="st">&quot;c = %d</span><span class="ch">\n</span><span class="st">&quot;</span>, c);</code></pre>
<p>The equivalent Python code is</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">print</span>(<span class="st">&quot;c = </span><span class="ot">%d</span><span class="st">&quot;</span> % c)</code></pre>
<p>I'm hoping that you've already seen this %-style formatting in Python so that it's easy to understand how the C version works. Essentially the idea is that we have a format string e.g. <code>&quot;c = %d&quot;</code> which has certain variable place-holders in it e.g. the <code>%d</code> part. Here <code>%d</code> means format an integer using <em>Decimal</em> digits. So the Python code <code>&quot;c = %d&quot; % c</code> results in the string &quot;c = 600&quot; because <code>&quot;600&quot;</code> is the decimal digit representation of the value of the variable <code>c</code>. In Python we can then print that string with the <code>print</code> function.</p>
<p>The way it works in C is slightly different: we have one function called <code>printf</code> that takes the format string i.e. <code>&quot;c = %d\n&quot;</code> and any variables to be formatted (i.e. <code>c</code> in the example) and prints the result straight out to the terminal. So this results in a string like <code>&quot;c = 600\n&quot;</code> being printed.</p>
<p>You may be wondering what the <code>\n</code> in the string does. This is a <em>newline</em> character. It is used to mark the end of a line of text. The terminal knows when it sees this that any new things that will be printed should be printed on the line below. When we use the <code>print</code> function in Python or the <code>puts</code> function in C the newline character is added automatically which is why if you call <code>print</code> or <code>puts</code> twice then the different strings will show on different lines in the terminal. With <code>printf</code> this newline character is not automatically added so we need to include it in the string to be printed. The symbol for a newline character in a string (in C or Python) is <code>\n</code>. Although this looks like two characters it's really just one special character.</p>
<p>To see the effect of newline characters try modifying the hello world program to use <code>printf</code> like this</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    printf(<span class="st">&quot;Hello world!&quot;</span>);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
<h2 id="exercises">Exercises</h2>
<p>Now try changing the string to <code>&quot;Hello world!\n&quot;</code>, <code>&quot;Hello\nworld!&quot;</code>, or <code>&quot;Hello\nworld!\n&quot;</code> and see what happens. What happens if you call <code>puts(&quot;Hello&quot;)</code> followed by <code>puts(&quot;World&quot;)</code>? What if you use two <code>printf</code> calls instead of <code>puts</code>?</p>
<h2 id="comments-and-coding-style">Comments and coding style</h2>
<p>In C as in Python we normally use comments to help explain the meaning of our code. For example:</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="co">/*</span>
<span class="co"> * hello.c : prints a nice greeting</span>
<span class="co"> *</span>
<span class="co"> * Author: Oscar Benjamin</span>
<span class="co"> * Date: 29 Jan 2016</span>
<span class="co"> */</span>
<span class="ot">#include &lt;stdio.h&gt;</span>

<span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> *argv[])
{
    <span class="co">/* Actually print the message. */</span>
    printf(<span class="st">&quot;Hello world!&quot;</span>);

    <span class="kw">return</span> <span class="dv">0</span>; <span class="co">// Never forget to return 0!</span>
}</code></pre>
<p>There are two types of comments. Double slash <code>//</code> comments are similar to Python and mean that from that point to the end of the line is a comment that will be ignored by the compiler. The other kind of comment begins with <code>/*</code> and ends with <code>*/</code> and can span multiple lines. It is common to put a big comment at the start that is nicely formatted with a <code>*</code> at the beginning of each line. In small examples in these notes I will use a comment at the start to indicate the name of the file (so that you understand which file I'm compiling later).</p>
<p>In Python indentation defines the beginning and end of blocks e.g. in an <code>if</code> block or a <code>for</code> loop. In C blocks begin and end with curly brackets e.g. <code>{</code> and <code>}</code> so the indentation is unnecessary. Also since a semicolon <code>;</code> is used to mark the end of statements it's not important for them to be on one line as it is in Python. This means that we could write the code above like this:</p>
<pre class="sourceCode C"><code class="sourceCode c"><span class="ot">#include &lt;stdio.h&gt;</span>
<span class="dt">int</span> main(
<span class="dt">int</span> argc, <span class="dt">char</span> *          argv[]) {
printf(
<span class="st">&quot;Hello world!&quot;</span>
)
; <span class="kw">return</span> <span class="dv">0</span>; }</code></pre>
<p>However this code is much harder to read so please don't do that! Always use indentation consistently as it makes it much easier to read your code. Also make sure that you keep your indentation correct at all times. Your programming editor will be able to handle a lot of the indentation for you but only if you keep it correct. Please don't think of indentation as being something that you should fix at the end; keep your code clean and easy to read at all times. (How you write your code is part of the markscheme in this unit.)</p>
<hr />
<p>Next section: <a href="elementary_types.html">elementary types</a></p>
    </div>
  </body>
</html>
